{"ast":null,"code":"/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\n\"use strict\";\n\nvar _slicedToArray = require(\"/Users/brunocamparadiniz/Desktop/coding/BC-AY/react/todolist/node_modules/@babel/runtime/helpers/slicedToArray.js\").default;\nvar _classCallCheck = require(\"/Users/brunocamparadiniz/Desktop/coding/BC-AY/react/todolist/node_modules/@babel/runtime/helpers/classCallCheck.js\").default;\nvar _createClass = require(\"/Users/brunocamparadiniz/Desktop/coding/BC-AY/react/todolist/node_modules/@babel/runtime/helpers/createClass.js\").default;\nvar _createForOfIteratorHelper = require(\"/Users/brunocamparadiniz/Desktop/coding/BC-AY/react/todolist/node_modules/@babel/runtime/helpers/createForOfIteratorHelper.js\").default;\nvar nextTick = require(\"process\").nextTick;\n\n/** @typedef {import(\"./Resolver\").FileSystem} FileSystem */\n/** @typedef {import(\"./Resolver\").SyncFileSystem} SyncFileSystem */\n\nvar dirname = function dirname(path) {\n  var idx = path.length - 1;\n  while (idx >= 0) {\n    var c = path.charCodeAt(idx);\n    // slash or backslash\n    if (c === 47 || c === 92) break;\n    idx--;\n  }\n  if (idx < 0) return \"\";\n  return path.slice(0, idx);\n};\nvar runCallbacks = function runCallbacks(callbacks, err, result) {\n  if (callbacks.length === 1) {\n    callbacks[0](err, result);\n    callbacks.length = 0;\n    return;\n  }\n  var error;\n  var _iterator = _createForOfIteratorHelper(callbacks),\n    _step;\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var callback = _step.value;\n      try {\n        callback(err, result);\n      } catch (e) {\n        if (!error) error = e;\n      }\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n  callbacks.length = 0;\n  if (error) throw error;\n};\nvar OperationMergerBackend = /*#__PURE__*/function () {\n  /**\n   * @param {any} provider async method\n   * @param {any} syncProvider sync method\n   * @param {any} providerContext call context for the provider methods\n   */\n  function OperationMergerBackend(provider, syncProvider, providerContext) {\n    var _this = this;\n    _classCallCheck(this, OperationMergerBackend);\n    this._provider = provider;\n    this._syncProvider = syncProvider;\n    this._providerContext = providerContext;\n    this._activeAsyncOperations = new Map();\n    this.provide = this._provider ? function (path, options, callback) {\n      if (typeof options === \"function\") {\n        callback = options;\n        options = undefined;\n      }\n      if (options) {\n        return _this._provider.call(_this._providerContext, path, options, callback);\n      }\n      if (typeof path !== \"string\") {\n        callback(new TypeError(\"path must be a string\"));\n        return;\n      }\n      var callbacks = _this._activeAsyncOperations.get(path);\n      if (callbacks) {\n        callbacks.push(callback);\n        return;\n      }\n      _this._activeAsyncOperations.set(path, callbacks = [callback]);\n      provider(path, function (err, result) {\n        _this._activeAsyncOperations.delete(path);\n        runCallbacks(callbacks, err, result);\n      });\n    } : null;\n    this.provideSync = this._syncProvider ? function (path, options) {\n      return _this._syncProvider.call(_this._providerContext, path, options);\n    } : null;\n  }\n  _createClass(OperationMergerBackend, [{\n    key: \"purge\",\n    value: function purge() {}\n  }, {\n    key: \"purgeParent\",\n    value: function purgeParent() {}\n  }]);\n  return OperationMergerBackend;\n}();\n/*\n\nIDLE:\n\tinsert data: goto SYNC\n\nSYNC:\n\tbefore provide: run ticks\n\tevent loop tick: goto ASYNC_ACTIVE\n\nASYNC:\n\ttimeout: run tick, goto ASYNC_PASSIVE\n\nASYNC_PASSIVE:\n\tbefore provide: run ticks\n\nIDLE --[insert data]--> SYNC --[event loop tick]--> ASYNC_ACTIVE --[interval tick]-> ASYNC_PASSIVE\n                                                          ^                             |\n                                                          +---------[insert data]-------+\n*/\nvar STORAGE_MODE_IDLE = 0;\nvar STORAGE_MODE_SYNC = 1;\nvar STORAGE_MODE_ASYNC = 2;\nvar CacheBackend = /*#__PURE__*/function () {\n  /**\n   * @param {number} duration max cache duration of items\n   * @param {any} provider async method\n   * @param {any} syncProvider sync method\n   * @param {any} providerContext call context for the provider methods\n   */\n  function CacheBackend(duration, provider, syncProvider, providerContext) {\n    _classCallCheck(this, CacheBackend);\n    this._duration = duration;\n    this._provider = provider;\n    this._syncProvider = syncProvider;\n    this._providerContext = providerContext;\n    /** @type {Map<string, (function(Error, any): void)[]>} */\n    this._activeAsyncOperations = new Map();\n    /** @type {Map<string, { err: Error, result: any, level: Set<string> }>} */\n    this._data = new Map();\n    /** @type {Set<string>[]} */\n    this._levels = [];\n    for (var i = 0; i < 10; i++) this._levels.push(new Set());\n    for (var _i = 5000; _i < duration; _i += 500) this._levels.push(new Set());\n    this._currentLevel = 0;\n    this._tickInterval = Math.floor(duration / this._levels.length);\n    /** @type {STORAGE_MODE_IDLE | STORAGE_MODE_SYNC | STORAGE_MODE_ASYNC} */\n    this._mode = STORAGE_MODE_IDLE;\n\n    /** @type {NodeJS.Timeout | undefined} */\n    this._timeout = undefined;\n    /** @type {number | undefined} */\n    this._nextDecay = undefined;\n    this.provide = provider ? this.provide.bind(this) : null;\n    this.provideSync = syncProvider ? this.provideSync.bind(this) : null;\n  }\n  _createClass(CacheBackend, [{\n    key: \"provide\",\n    value: function provide(path, options, callback) {\n      var _this2 = this;\n      if (typeof options === \"function\") {\n        callback = options;\n        options = undefined;\n      }\n      if (typeof path !== \"string\") {\n        callback(new TypeError(\"path must be a string\"));\n        return;\n      }\n      if (options) {\n        return this._provider.call(this._providerContext, path, options, callback);\n      }\n\n      // When in sync mode we can move to async mode\n      if (this._mode === STORAGE_MODE_SYNC) {\n        this._enterAsyncMode();\n      }\n\n      // Check in cache\n      var cacheEntry = this._data.get(path);\n      if (cacheEntry !== undefined) {\n        if (cacheEntry.err) return nextTick(callback, cacheEntry.err);\n        return nextTick(callback, null, cacheEntry.result);\n      }\n\n      // Check if there is already the same operation running\n      var callbacks = this._activeAsyncOperations.get(path);\n      if (callbacks !== undefined) {\n        callbacks.push(callback);\n        return;\n      }\n      this._activeAsyncOperations.set(path, callbacks = [callback]);\n\n      // Run the operation\n      this._provider.call(this._providerContext, path, function (err, result) {\n        _this2._activeAsyncOperations.delete(path);\n        _this2._storeResult(path, err, result);\n\n        // Enter async mode if not yet done\n        _this2._enterAsyncMode();\n        runCallbacks(callbacks, err, result);\n      });\n    }\n  }, {\n    key: \"provideSync\",\n    value: function provideSync(path, options) {\n      if (typeof path !== \"string\") {\n        throw new TypeError(\"path must be a string\");\n      }\n      if (options) {\n        return this._syncProvider.call(this._providerContext, path, options);\n      }\n\n      // In sync mode we may have to decay some cache items\n      if (this._mode === STORAGE_MODE_SYNC) {\n        this._runDecays();\n      }\n\n      // Check in cache\n      var cacheEntry = this._data.get(path);\n      if (cacheEntry !== undefined) {\n        if (cacheEntry.err) throw cacheEntry.err;\n        return cacheEntry.result;\n      }\n\n      // Get all active async operations\n      // This sync operation will also complete them\n      var callbacks = this._activeAsyncOperations.get(path);\n      this._activeAsyncOperations.delete(path);\n\n      // Run the operation\n      // When in idle mode, we will enter sync mode\n      var result;\n      try {\n        result = this._syncProvider.call(this._providerContext, path);\n      } catch (err) {\n        this._storeResult(path, err, undefined);\n        this._enterSyncModeWhenIdle();\n        if (callbacks) runCallbacks(callbacks, err, undefined);\n        throw err;\n      }\n      this._storeResult(path, undefined, result);\n      this._enterSyncModeWhenIdle();\n      if (callbacks) runCallbacks(callbacks, undefined, result);\n      return result;\n    }\n  }, {\n    key: \"purge\",\n    value: function purge(what) {\n      if (!what) {\n        if (this._mode !== STORAGE_MODE_IDLE) {\n          this._data.clear();\n          var _iterator2 = _createForOfIteratorHelper(this._levels),\n            _step2;\n          try {\n            for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n              var level = _step2.value;\n              level.clear();\n            }\n          } catch (err) {\n            _iterator2.e(err);\n          } finally {\n            _iterator2.f();\n          }\n          this._enterIdleMode();\n        }\n      } else if (typeof what === \"string\") {\n        var _iterator3 = _createForOfIteratorHelper(this._data),\n          _step3;\n        try {\n          for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n            var _step3$value = _slicedToArray(_step3.value, 2),\n              key = _step3$value[0],\n              data = _step3$value[1];\n            if (key.startsWith(what)) {\n              this._data.delete(key);\n              data.level.delete(key);\n            }\n          }\n        } catch (err) {\n          _iterator3.e(err);\n        } finally {\n          _iterator3.f();\n        }\n        if (this._data.size === 0) {\n          this._enterIdleMode();\n        }\n      } else {\n        var _iterator4 = _createForOfIteratorHelper(this._data),\n          _step4;\n        try {\n          for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n            var _step4$value = _slicedToArray(_step4.value, 2),\n              _key = _step4$value[0],\n              _data = _step4$value[1];\n            var _iterator5 = _createForOfIteratorHelper(what),\n              _step5;\n            try {\n              for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {\n                var item = _step5.value;\n                if (_key.startsWith(item)) {\n                  this._data.delete(_key);\n                  _data.level.delete(_key);\n                  break;\n                }\n              }\n            } catch (err) {\n              _iterator5.e(err);\n            } finally {\n              _iterator5.f();\n            }\n          }\n        } catch (err) {\n          _iterator4.e(err);\n        } finally {\n          _iterator4.f();\n        }\n        if (this._data.size === 0) {\n          this._enterIdleMode();\n        }\n      }\n    }\n  }, {\n    key: \"purgeParent\",\n    value: function purgeParent(what) {\n      if (!what) {\n        this.purge();\n      } else if (typeof what === \"string\") {\n        this.purge(dirname(what));\n      } else {\n        var set = new Set();\n        var _iterator6 = _createForOfIteratorHelper(what),\n          _step6;\n        try {\n          for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {\n            var item = _step6.value;\n            set.add(dirname(item));\n          }\n        } catch (err) {\n          _iterator6.e(err);\n        } finally {\n          _iterator6.f();\n        }\n        this.purge(set);\n      }\n    }\n  }, {\n    key: \"_storeResult\",\n    value: function _storeResult(path, err, result) {\n      if (this._data.has(path)) return;\n      var level = this._levels[this._currentLevel];\n      this._data.set(path, {\n        err: err,\n        result: result,\n        level: level\n      });\n      level.add(path);\n    }\n  }, {\n    key: \"_decayLevel\",\n    value: function _decayLevel() {\n      var nextLevel = (this._currentLevel + 1) % this._levels.length;\n      var decay = this._levels[nextLevel];\n      this._currentLevel = nextLevel;\n      var _iterator7 = _createForOfIteratorHelper(decay),\n        _step7;\n      try {\n        for (_iterator7.s(); !(_step7 = _iterator7.n()).done;) {\n          var item = _step7.value;\n          this._data.delete(item);\n        }\n      } catch (err) {\n        _iterator7.e(err);\n      } finally {\n        _iterator7.f();\n      }\n      decay.clear();\n      if (this._data.size === 0) {\n        this._enterIdleMode();\n      } else {\n        // @ts-ignore _nextDecay is always a number in sync mode\n        this._nextDecay += this._tickInterval;\n      }\n    }\n  }, {\n    key: \"_runDecays\",\n    value: function _runDecays() {\n      while ( /** @type {number} */this._nextDecay <= Date.now() && this._mode !== STORAGE_MODE_IDLE) {\n        this._decayLevel();\n      }\n    }\n  }, {\n    key: \"_enterAsyncMode\",\n    value: function _enterAsyncMode() {\n      var _this3 = this;\n      var timeout = 0;\n      switch (this._mode) {\n        case STORAGE_MODE_ASYNC:\n          return;\n        case STORAGE_MODE_IDLE:\n          this._nextDecay = Date.now() + this._tickInterval;\n          timeout = this._tickInterval;\n          break;\n        case STORAGE_MODE_SYNC:\n          this._runDecays();\n          // @ts-ignore _runDecays may change the mode\n          if (this._mode === STORAGE_MODE_IDLE) return;\n          timeout = Math.max(0, /** @type {number} */this._nextDecay - Date.now());\n          break;\n      }\n      this._mode = STORAGE_MODE_ASYNC;\n      var ref = setTimeout(function () {\n        _this3._mode = STORAGE_MODE_SYNC;\n        _this3._runDecays();\n      }, timeout);\n      if (ref.unref) ref.unref();\n      this._timeout = ref;\n    }\n  }, {\n    key: \"_enterSyncModeWhenIdle\",\n    value: function _enterSyncModeWhenIdle() {\n      if (this._mode === STORAGE_MODE_IDLE) {\n        this._mode = STORAGE_MODE_SYNC;\n        this._nextDecay = Date.now() + this._tickInterval;\n      }\n    }\n  }, {\n    key: \"_enterIdleMode\",\n    value: function _enterIdleMode() {\n      this._mode = STORAGE_MODE_IDLE;\n      this._nextDecay = undefined;\n      if (this._timeout) clearTimeout(this._timeout);\n    }\n  }]);\n  return CacheBackend;\n}();\nvar createBackend = function createBackend(duration, provider, syncProvider, providerContext) {\n  if (duration > 0) {\n    return new CacheBackend(duration, provider, syncProvider, providerContext);\n  }\n  return new OperationMergerBackend(provider, syncProvider, providerContext);\n};\nmodule.exports = /*#__PURE__*/function () {\n  function CachedInputFileSystem(fileSystem, duration) {\n    var _this4 = this;\n    _classCallCheck(this, CachedInputFileSystem);\n    this.fileSystem = fileSystem;\n    this._lstatBackend = createBackend(duration, this.fileSystem.lstat, this.fileSystem.lstatSync, this.fileSystem);\n    var lstat = this._lstatBackend.provide;\n    this.lstat = /** @type {FileSystem[\"lstat\"]} */lstat;\n    var lstatSync = this._lstatBackend.provideSync;\n    this.lstatSync = /** @type {SyncFileSystem[\"lstatSync\"]} */lstatSync;\n    this._statBackend = createBackend(duration, this.fileSystem.stat, this.fileSystem.statSync, this.fileSystem);\n    var stat = this._statBackend.provide;\n    this.stat = /** @type {FileSystem[\"stat\"]} */stat;\n    var statSync = this._statBackend.provideSync;\n    this.statSync = /** @type {SyncFileSystem[\"statSync\"]} */statSync;\n    this._readdirBackend = createBackend(duration, this.fileSystem.readdir, this.fileSystem.readdirSync, this.fileSystem);\n    var readdir = this._readdirBackend.provide;\n    this.readdir = /** @type {FileSystem[\"readdir\"]} */readdir;\n    var readdirSync = this._readdirBackend.provideSync;\n    this.readdirSync = /** @type {SyncFileSystem[\"readdirSync\"]} */readdirSync;\n    this._readFileBackend = createBackend(duration, this.fileSystem.readFile, this.fileSystem.readFileSync, this.fileSystem);\n    var readFile = this._readFileBackend.provide;\n    this.readFile = /** @type {FileSystem[\"readFile\"]} */readFile;\n    var readFileSync = this._readFileBackend.provideSync;\n    this.readFileSync = /** @type {SyncFileSystem[\"readFileSync\"]} */readFileSync;\n    this._readJsonBackend = createBackend(duration, this.fileSystem.readJson || this.readFile && function (path, callback) {\n      // @ts-ignore\n      _this4.readFile(path, function (err, buffer) {\n        if (err) return callback(err);\n        if (!buffer || buffer.length === 0) return callback(new Error(\"No file content\"));\n        var data;\n        try {\n          data = JSON.parse(buffer.toString(\"utf-8\"));\n        } catch (e) {\n          return callback(e);\n        }\n        callback(null, data);\n      });\n    }, this.fileSystem.readJsonSync || this.readFileSync && function (path) {\n      var buffer = _this4.readFileSync(path);\n      var data = JSON.parse(buffer.toString(\"utf-8\"));\n      return data;\n    }, this.fileSystem);\n    var readJson = this._readJsonBackend.provide;\n    this.readJson = /** @type {FileSystem[\"readJson\"]} */readJson;\n    var readJsonSync = this._readJsonBackend.provideSync;\n    this.readJsonSync = /** @type {SyncFileSystem[\"readJsonSync\"]} */readJsonSync;\n    this._readlinkBackend = createBackend(duration, this.fileSystem.readlink, this.fileSystem.readlinkSync, this.fileSystem);\n    var readlink = this._readlinkBackend.provide;\n    this.readlink = /** @type {FileSystem[\"readlink\"]} */readlink;\n    var readlinkSync = this._readlinkBackend.provideSync;\n    this.readlinkSync = /** @type {SyncFileSystem[\"readlinkSync\"]} */readlinkSync;\n  }\n  _createClass(CachedInputFileSystem, [{\n    key: \"purge\",\n    value: function purge(what) {\n      this._statBackend.purge(what);\n      this._lstatBackend.purge(what);\n      this._readdirBackend.purgeParent(what);\n      this._readFileBackend.purge(what);\n      this._readlinkBackend.purge(what);\n      this._readJsonBackend.purge(what);\n    }\n  }]);\n  return CachedInputFileSystem;\n}();","map":{"version":3,"names":["nextTick","require","dirname","path","idx","length","c","charCodeAt","slice","runCallbacks","callbacks","err","result","error","callback","e","OperationMergerBackend","provider","syncProvider","providerContext","_provider","_syncProvider","_providerContext","_activeAsyncOperations","Map","provide","options","undefined","call","TypeError","get","push","set","delete","provideSync","STORAGE_MODE_IDLE","STORAGE_MODE_SYNC","STORAGE_MODE_ASYNC","CacheBackend","duration","_duration","_data","_levels","i","Set","_currentLevel","_tickInterval","Math","floor","_mode","_timeout","_nextDecay","bind","_enterAsyncMode","cacheEntry","_storeResult","_runDecays","_enterSyncModeWhenIdle","what","clear","level","_enterIdleMode","key","data","startsWith","size","item","purge","add","has","nextLevel","decay","Date","now","_decayLevel","timeout","max","ref","setTimeout","unref","clearTimeout","createBackend","module","exports","fileSystem","_lstatBackend","lstat","lstatSync","_statBackend","stat","statSync","_readdirBackend","readdir","readdirSync","_readFileBackend","readFile","readFileSync","_readJsonBackend","readJson","buffer","Error","JSON","parse","toString","readJsonSync","_readlinkBackend","readlink","readlinkSync","purgeParent"],"sources":["/Users/brunocamparadiniz/Desktop/coding/BC-AY/react/todolist/node_modules/enhanced-resolve/lib/CachedInputFileSystem.js"],"sourcesContent":["/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\n\"use strict\";\n\nconst nextTick = require(\"process\").nextTick;\n\n/** @typedef {import(\"./Resolver\").FileSystem} FileSystem */\n/** @typedef {import(\"./Resolver\").SyncFileSystem} SyncFileSystem */\n\nconst dirname = path => {\n\tlet idx = path.length - 1;\n\twhile (idx >= 0) {\n\t\tconst c = path.charCodeAt(idx);\n\t\t// slash or backslash\n\t\tif (c === 47 || c === 92) break;\n\t\tidx--;\n\t}\n\tif (idx < 0) return \"\";\n\treturn path.slice(0, idx);\n};\n\nconst runCallbacks = (callbacks, err, result) => {\n\tif (callbacks.length === 1) {\n\t\tcallbacks[0](err, result);\n\t\tcallbacks.length = 0;\n\t\treturn;\n\t}\n\tlet error;\n\tfor (const callback of callbacks) {\n\t\ttry {\n\t\t\tcallback(err, result);\n\t\t} catch (e) {\n\t\t\tif (!error) error = e;\n\t\t}\n\t}\n\tcallbacks.length = 0;\n\tif (error) throw error;\n};\n\nclass OperationMergerBackend {\n\t/**\n\t * @param {any} provider async method\n\t * @param {any} syncProvider sync method\n\t * @param {any} providerContext call context for the provider methods\n\t */\n\tconstructor(provider, syncProvider, providerContext) {\n\t\tthis._provider = provider;\n\t\tthis._syncProvider = syncProvider;\n\t\tthis._providerContext = providerContext;\n\t\tthis._activeAsyncOperations = new Map();\n\n\t\tthis.provide = this._provider\n\t\t\t? (path, options, callback) => {\n\t\t\t\t\tif (typeof options === \"function\") {\n\t\t\t\t\t\tcallback = options;\n\t\t\t\t\t\toptions = undefined;\n\t\t\t\t\t}\n\t\t\t\t\tif (options) {\n\t\t\t\t\t\treturn this._provider.call(\n\t\t\t\t\t\t\tthis._providerContext,\n\t\t\t\t\t\t\tpath,\n\t\t\t\t\t\t\toptions,\n\t\t\t\t\t\t\tcallback\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tif (typeof path !== \"string\") {\n\t\t\t\t\t\tcallback(new TypeError(\"path must be a string\"));\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tlet callbacks = this._activeAsyncOperations.get(path);\n\t\t\t\t\tif (callbacks) {\n\t\t\t\t\t\tcallbacks.push(callback);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tthis._activeAsyncOperations.set(path, (callbacks = [callback]));\n\t\t\t\t\tprovider(path, (err, result) => {\n\t\t\t\t\t\tthis._activeAsyncOperations.delete(path);\n\t\t\t\t\t\trunCallbacks(callbacks, err, result);\n\t\t\t\t\t});\n\t\t\t  }\n\t\t\t: null;\n\t\tthis.provideSync = this._syncProvider\n\t\t\t? (path, options) => {\n\t\t\t\t\treturn this._syncProvider.call(this._providerContext, path, options);\n\t\t\t  }\n\t\t\t: null;\n\t}\n\n\tpurge() {}\n\tpurgeParent() {}\n}\n\n/*\n\nIDLE:\n\tinsert data: goto SYNC\n\nSYNC:\n\tbefore provide: run ticks\n\tevent loop tick: goto ASYNC_ACTIVE\n\nASYNC:\n\ttimeout: run tick, goto ASYNC_PASSIVE\n\nASYNC_PASSIVE:\n\tbefore provide: run ticks\n\nIDLE --[insert data]--> SYNC --[event loop tick]--> ASYNC_ACTIVE --[interval tick]-> ASYNC_PASSIVE\n                                                          ^                             |\n                                                          +---------[insert data]-------+\n*/\n\nconst STORAGE_MODE_IDLE = 0;\nconst STORAGE_MODE_SYNC = 1;\nconst STORAGE_MODE_ASYNC = 2;\n\nclass CacheBackend {\n\t/**\n\t * @param {number} duration max cache duration of items\n\t * @param {any} provider async method\n\t * @param {any} syncProvider sync method\n\t * @param {any} providerContext call context for the provider methods\n\t */\n\tconstructor(duration, provider, syncProvider, providerContext) {\n\t\tthis._duration = duration;\n\t\tthis._provider = provider;\n\t\tthis._syncProvider = syncProvider;\n\t\tthis._providerContext = providerContext;\n\t\t/** @type {Map<string, (function(Error, any): void)[]>} */\n\t\tthis._activeAsyncOperations = new Map();\n\t\t/** @type {Map<string, { err: Error, result: any, level: Set<string> }>} */\n\t\tthis._data = new Map();\n\t\t/** @type {Set<string>[]} */\n\t\tthis._levels = [];\n\t\tfor (let i = 0; i < 10; i++) this._levels.push(new Set());\n\t\tfor (let i = 5000; i < duration; i += 500) this._levels.push(new Set());\n\t\tthis._currentLevel = 0;\n\t\tthis._tickInterval = Math.floor(duration / this._levels.length);\n\t\t/** @type {STORAGE_MODE_IDLE | STORAGE_MODE_SYNC | STORAGE_MODE_ASYNC} */\n\t\tthis._mode = STORAGE_MODE_IDLE;\n\n\t\t/** @type {NodeJS.Timeout | undefined} */\n\t\tthis._timeout = undefined;\n\t\t/** @type {number | undefined} */\n\t\tthis._nextDecay = undefined;\n\n\t\tthis.provide = provider ? this.provide.bind(this) : null;\n\t\tthis.provideSync = syncProvider ? this.provideSync.bind(this) : null;\n\t}\n\n\tprovide(path, options, callback) {\n\t\tif (typeof options === \"function\") {\n\t\t\tcallback = options;\n\t\t\toptions = undefined;\n\t\t}\n\t\tif (typeof path !== \"string\") {\n\t\t\tcallback(new TypeError(\"path must be a string\"));\n\t\t\treturn;\n\t\t}\n\t\tif (options) {\n\t\t\treturn this._provider.call(\n\t\t\t\tthis._providerContext,\n\t\t\t\tpath,\n\t\t\t\toptions,\n\t\t\t\tcallback\n\t\t\t);\n\t\t}\n\n\t\t// When in sync mode we can move to async mode\n\t\tif (this._mode === STORAGE_MODE_SYNC) {\n\t\t\tthis._enterAsyncMode();\n\t\t}\n\n\t\t// Check in cache\n\t\tlet cacheEntry = this._data.get(path);\n\t\tif (cacheEntry !== undefined) {\n\t\t\tif (cacheEntry.err) return nextTick(callback, cacheEntry.err);\n\t\t\treturn nextTick(callback, null, cacheEntry.result);\n\t\t}\n\n\t\t// Check if there is already the same operation running\n\t\tlet callbacks = this._activeAsyncOperations.get(path);\n\t\tif (callbacks !== undefined) {\n\t\t\tcallbacks.push(callback);\n\t\t\treturn;\n\t\t}\n\t\tthis._activeAsyncOperations.set(path, (callbacks = [callback]));\n\n\t\t// Run the operation\n\t\tthis._provider.call(this._providerContext, path, (err, result) => {\n\t\t\tthis._activeAsyncOperations.delete(path);\n\t\t\tthis._storeResult(path, err, result);\n\n\t\t\t// Enter async mode if not yet done\n\t\t\tthis._enterAsyncMode();\n\n\t\t\trunCallbacks(callbacks, err, result);\n\t\t});\n\t}\n\n\tprovideSync(path, options) {\n\t\tif (typeof path !== \"string\") {\n\t\t\tthrow new TypeError(\"path must be a string\");\n\t\t}\n\t\tif (options) {\n\t\t\treturn this._syncProvider.call(this._providerContext, path, options);\n\t\t}\n\n\t\t// In sync mode we may have to decay some cache items\n\t\tif (this._mode === STORAGE_MODE_SYNC) {\n\t\t\tthis._runDecays();\n\t\t}\n\n\t\t// Check in cache\n\t\tlet cacheEntry = this._data.get(path);\n\t\tif (cacheEntry !== undefined) {\n\t\t\tif (cacheEntry.err) throw cacheEntry.err;\n\t\t\treturn cacheEntry.result;\n\t\t}\n\n\t\t// Get all active async operations\n\t\t// This sync operation will also complete them\n\t\tconst callbacks = this._activeAsyncOperations.get(path);\n\t\tthis._activeAsyncOperations.delete(path);\n\n\t\t// Run the operation\n\t\t// When in idle mode, we will enter sync mode\n\t\tlet result;\n\t\ttry {\n\t\t\tresult = this._syncProvider.call(this._providerContext, path);\n\t\t} catch (err) {\n\t\t\tthis._storeResult(path, err, undefined);\n\t\t\tthis._enterSyncModeWhenIdle();\n\t\t\tif (callbacks) runCallbacks(callbacks, err, undefined);\n\t\t\tthrow err;\n\t\t}\n\t\tthis._storeResult(path, undefined, result);\n\t\tthis._enterSyncModeWhenIdle();\n\t\tif (callbacks) runCallbacks(callbacks, undefined, result);\n\t\treturn result;\n\t}\n\n\tpurge(what) {\n\t\tif (!what) {\n\t\t\tif (this._mode !== STORAGE_MODE_IDLE) {\n\t\t\t\tthis._data.clear();\n\t\t\t\tfor (const level of this._levels) {\n\t\t\t\t\tlevel.clear();\n\t\t\t\t}\n\t\t\t\tthis._enterIdleMode();\n\t\t\t}\n\t\t} else if (typeof what === \"string\") {\n\t\t\tfor (let [key, data] of this._data) {\n\t\t\t\tif (key.startsWith(what)) {\n\t\t\t\t\tthis._data.delete(key);\n\t\t\t\t\tdata.level.delete(key);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (this._data.size === 0) {\n\t\t\t\tthis._enterIdleMode();\n\t\t\t}\n\t\t} else {\n\t\t\tfor (let [key, data] of this._data) {\n\t\t\t\tfor (const item of what) {\n\t\t\t\t\tif (key.startsWith(item)) {\n\t\t\t\t\t\tthis._data.delete(key);\n\t\t\t\t\t\tdata.level.delete(key);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (this._data.size === 0) {\n\t\t\t\tthis._enterIdleMode();\n\t\t\t}\n\t\t}\n\t}\n\n\tpurgeParent(what) {\n\t\tif (!what) {\n\t\t\tthis.purge();\n\t\t} else if (typeof what === \"string\") {\n\t\t\tthis.purge(dirname(what));\n\t\t} else {\n\t\t\tconst set = new Set();\n\t\t\tfor (const item of what) {\n\t\t\t\tset.add(dirname(item));\n\t\t\t}\n\t\t\tthis.purge(set);\n\t\t}\n\t}\n\n\t_storeResult(path, err, result) {\n\t\tif (this._data.has(path)) return;\n\t\tconst level = this._levels[this._currentLevel];\n\t\tthis._data.set(path, { err, result, level });\n\t\tlevel.add(path);\n\t}\n\n\t_decayLevel() {\n\t\tconst nextLevel = (this._currentLevel + 1) % this._levels.length;\n\t\tconst decay = this._levels[nextLevel];\n\t\tthis._currentLevel = nextLevel;\n\t\tfor (let item of decay) {\n\t\t\tthis._data.delete(item);\n\t\t}\n\t\tdecay.clear();\n\t\tif (this._data.size === 0) {\n\t\t\tthis._enterIdleMode();\n\t\t} else {\n\t\t\t// @ts-ignore _nextDecay is always a number in sync mode\n\t\t\tthis._nextDecay += this._tickInterval;\n\t\t}\n\t}\n\n\t_runDecays() {\n\t\twhile (\n\t\t\t/** @type {number} */ (this._nextDecay) <= Date.now() &&\n\t\t\tthis._mode !== STORAGE_MODE_IDLE\n\t\t) {\n\t\t\tthis._decayLevel();\n\t\t}\n\t}\n\n\t_enterAsyncMode() {\n\t\tlet timeout = 0;\n\t\tswitch (this._mode) {\n\t\t\tcase STORAGE_MODE_ASYNC:\n\t\t\t\treturn;\n\t\t\tcase STORAGE_MODE_IDLE:\n\t\t\t\tthis._nextDecay = Date.now() + this._tickInterval;\n\t\t\t\ttimeout = this._tickInterval;\n\t\t\t\tbreak;\n\t\t\tcase STORAGE_MODE_SYNC:\n\t\t\t\tthis._runDecays();\n\t\t\t\t// @ts-ignore _runDecays may change the mode\n\t\t\t\tif (this._mode === STORAGE_MODE_IDLE) return;\n\t\t\t\ttimeout = Math.max(\n\t\t\t\t\t0,\n\t\t\t\t\t/** @type {number} */ (this._nextDecay) - Date.now()\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t}\n\t\tthis._mode = STORAGE_MODE_ASYNC;\n\t\tconst ref = setTimeout(() => {\n\t\t\tthis._mode = STORAGE_MODE_SYNC;\n\t\t\tthis._runDecays();\n\t\t}, timeout);\n\t\tif (ref.unref) ref.unref();\n\t\tthis._timeout = ref;\n\t}\n\n\t_enterSyncModeWhenIdle() {\n\t\tif (this._mode === STORAGE_MODE_IDLE) {\n\t\t\tthis._mode = STORAGE_MODE_SYNC;\n\t\t\tthis._nextDecay = Date.now() + this._tickInterval;\n\t\t}\n\t}\n\n\t_enterIdleMode() {\n\t\tthis._mode = STORAGE_MODE_IDLE;\n\t\tthis._nextDecay = undefined;\n\t\tif (this._timeout) clearTimeout(this._timeout);\n\t}\n}\n\nconst createBackend = (duration, provider, syncProvider, providerContext) => {\n\tif (duration > 0) {\n\t\treturn new CacheBackend(duration, provider, syncProvider, providerContext);\n\t}\n\treturn new OperationMergerBackend(provider, syncProvider, providerContext);\n};\n\nmodule.exports = class CachedInputFileSystem {\n\tconstructor(fileSystem, duration) {\n\t\tthis.fileSystem = fileSystem;\n\n\t\tthis._lstatBackend = createBackend(\n\t\t\tduration,\n\t\t\tthis.fileSystem.lstat,\n\t\t\tthis.fileSystem.lstatSync,\n\t\t\tthis.fileSystem\n\t\t);\n\t\tconst lstat = this._lstatBackend.provide;\n\t\tthis.lstat = /** @type {FileSystem[\"lstat\"]} */ (lstat);\n\t\tconst lstatSync = this._lstatBackend.provideSync;\n\t\tthis.lstatSync = /** @type {SyncFileSystem[\"lstatSync\"]} */ (lstatSync);\n\n\t\tthis._statBackend = createBackend(\n\t\t\tduration,\n\t\t\tthis.fileSystem.stat,\n\t\t\tthis.fileSystem.statSync,\n\t\t\tthis.fileSystem\n\t\t);\n\t\tconst stat = this._statBackend.provide;\n\t\tthis.stat = /** @type {FileSystem[\"stat\"]} */ (stat);\n\t\tconst statSync = this._statBackend.provideSync;\n\t\tthis.statSync = /** @type {SyncFileSystem[\"statSync\"]} */ (statSync);\n\n\t\tthis._readdirBackend = createBackend(\n\t\t\tduration,\n\t\t\tthis.fileSystem.readdir,\n\t\t\tthis.fileSystem.readdirSync,\n\t\t\tthis.fileSystem\n\t\t);\n\t\tconst readdir = this._readdirBackend.provide;\n\t\tthis.readdir = /** @type {FileSystem[\"readdir\"]} */ (readdir);\n\t\tconst readdirSync = this._readdirBackend.provideSync;\n\t\tthis.readdirSync = /** @type {SyncFileSystem[\"readdirSync\"]} */ (readdirSync);\n\n\t\tthis._readFileBackend = createBackend(\n\t\t\tduration,\n\t\t\tthis.fileSystem.readFile,\n\t\t\tthis.fileSystem.readFileSync,\n\t\t\tthis.fileSystem\n\t\t);\n\t\tconst readFile = this._readFileBackend.provide;\n\t\tthis.readFile = /** @type {FileSystem[\"readFile\"]} */ (readFile);\n\t\tconst readFileSync = this._readFileBackend.provideSync;\n\t\tthis.readFileSync = /** @type {SyncFileSystem[\"readFileSync\"]} */ (readFileSync);\n\n\t\tthis._readJsonBackend = createBackend(\n\t\t\tduration,\n\t\t\tthis.fileSystem.readJson ||\n\t\t\t\t(this.readFile &&\n\t\t\t\t\t((path, callback) => {\n\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\tthis.readFile(path, (err, buffer) => {\n\t\t\t\t\t\t\tif (err) return callback(err);\n\t\t\t\t\t\t\tif (!buffer || buffer.length === 0)\n\t\t\t\t\t\t\t\treturn callback(new Error(\"No file content\"));\n\t\t\t\t\t\t\tlet data;\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tdata = JSON.parse(buffer.toString(\"utf-8\"));\n\t\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\t\treturn callback(e);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tcallback(null, data);\n\t\t\t\t\t\t});\n\t\t\t\t\t})),\n\t\t\tthis.fileSystem.readJsonSync ||\n\t\t\t\t(this.readFileSync &&\n\t\t\t\t\t(path => {\n\t\t\t\t\t\tconst buffer = this.readFileSync(path);\n\t\t\t\t\t\tconst data = JSON.parse(buffer.toString(\"utf-8\"));\n\t\t\t\t\t\treturn data;\n\t\t\t\t\t})),\n\t\t\tthis.fileSystem\n\t\t);\n\t\tconst readJson = this._readJsonBackend.provide;\n\t\tthis.readJson = /** @type {FileSystem[\"readJson\"]} */ (readJson);\n\t\tconst readJsonSync = this._readJsonBackend.provideSync;\n\t\tthis.readJsonSync = /** @type {SyncFileSystem[\"readJsonSync\"]} */ (readJsonSync);\n\n\t\tthis._readlinkBackend = createBackend(\n\t\t\tduration,\n\t\t\tthis.fileSystem.readlink,\n\t\t\tthis.fileSystem.readlinkSync,\n\t\t\tthis.fileSystem\n\t\t);\n\t\tconst readlink = this._readlinkBackend.provide;\n\t\tthis.readlink = /** @type {FileSystem[\"readlink\"]} */ (readlink);\n\t\tconst readlinkSync = this._readlinkBackend.provideSync;\n\t\tthis.readlinkSync = /** @type {SyncFileSystem[\"readlinkSync\"]} */ (readlinkSync);\n\t}\n\n\tpurge(what) {\n\t\tthis._statBackend.purge(what);\n\t\tthis._lstatBackend.purge(what);\n\t\tthis._readdirBackend.purgeParent(what);\n\t\tthis._readFileBackend.purge(what);\n\t\tthis._readlinkBackend.purge(what);\n\t\tthis._readJsonBackend.purge(what);\n\t}\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}