{"ast":null,"code":"/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nvar _slicedToArray = require(\"/Users/brunocamparadiniz/Desktop/coding/BC-AY/react/todolist/node_modules/@babel/runtime/helpers/slicedToArray.js\").default;\nvar _assertThisInitialized = require(\"/Users/brunocamparadiniz/Desktop/coding/BC-AY/react/todolist/node_modules/@babel/runtime/helpers/assertThisInitialized.js\").default;\nvar _inherits = require(\"/Users/brunocamparadiniz/Desktop/coding/BC-AY/react/todolist/node_modules/@babel/runtime/helpers/inherits.js\").default;\nvar _createSuper = require(\"/Users/brunocamparadiniz/Desktop/coding/BC-AY/react/todolist/node_modules/@babel/runtime/helpers/createSuper.js\").default;\nvar _classCallCheck = require(\"/Users/brunocamparadiniz/Desktop/coding/BC-AY/react/todolist/node_modules/@babel/runtime/helpers/classCallCheck.js\").default;\nvar _createClass = require(\"/Users/brunocamparadiniz/Desktop/coding/BC-AY/react/todolist/node_modules/@babel/runtime/helpers/createClass.js\").default;\nvar _createForOfIteratorHelper = require(\"/Users/brunocamparadiniz/Desktop/coding/BC-AY/react/todolist/node_modules/@babel/runtime/helpers/createForOfIteratorHelper.js\").default;\nvar getWatcherManager = require(\"./getWatcherManager\");\nvar LinkResolver = require(\"./LinkResolver\");\nvar EventEmitter = require(\"events\").EventEmitter;\nvar globToRegExp = require(\"glob-to-regexp\");\nvar watchEventSource = require(\"./watchEventSource\");\nvar EMPTY_ARRAY = [];\nvar EMPTY_OPTIONS = {};\nfunction addWatchersToSet(watchers, set) {\n  var _iterator = _createForOfIteratorHelper(watchers),\n    _step;\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var ww = _step.value;\n      var w = ww.watcher;\n      if (!set.has(w.directoryWatcher)) {\n        set.add(w.directoryWatcher);\n      }\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n}\nvar stringToRegexp = function stringToRegexp(ignored) {\n  var source = globToRegExp(ignored, {\n    globstar: true,\n    extended: true\n  }).source;\n  var matchingStart = source.slice(0, source.length - 1) + \"(?:$|\\\\/)\";\n  return matchingStart;\n};\nvar ignoredToFunction = function ignoredToFunction(ignored) {\n  if (Array.isArray(ignored)) {\n    var regexp = new RegExp(ignored.map(function (i) {\n      return stringToRegexp(i);\n    }).join(\"|\"));\n    return function (x) {\n      return regexp.test(x.replace(/\\\\/g, \"/\"));\n    };\n  } else if (typeof ignored === \"string\") {\n    var _regexp = new RegExp(stringToRegexp(ignored));\n    return function (x) {\n      return _regexp.test(x.replace(/\\\\/g, \"/\"));\n    };\n  } else if (ignored instanceof RegExp) {\n    return function (x) {\n      return ignored.test(x.replace(/\\\\/g, \"/\"));\n    };\n  } else if (ignored instanceof Function) {\n    return ignored;\n  } else if (ignored) {\n    throw new Error(\"Invalid option for 'ignored': \".concat(ignored));\n  } else {\n    return function () {\n      return false;\n    };\n  }\n};\nvar normalizeOptions = function normalizeOptions(options) {\n  return {\n    followSymlinks: !!options.followSymlinks,\n    ignored: ignoredToFunction(options.ignored),\n    poll: options.poll\n  };\n};\nvar normalizeCache = new WeakMap();\nvar cachedNormalizeOptions = function cachedNormalizeOptions(options) {\n  var cacheEntry = normalizeCache.get(options);\n  if (cacheEntry !== undefined) return cacheEntry;\n  var normalized = normalizeOptions(options);\n  normalizeCache.set(options, normalized);\n  return normalized;\n};\nvar WatchpackFileWatcher = /*#__PURE__*/function () {\n  function WatchpackFileWatcher(watchpack, watcher, files) {\n    var _this = this;\n    _classCallCheck(this, WatchpackFileWatcher);\n    this.files = Array.isArray(files) ? files : [files];\n    this.watcher = watcher;\n    watcher.on(\"initial-missing\", function (type) {\n      var _iterator2 = _createForOfIteratorHelper(_this.files),\n        _step2;\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var file = _step2.value;\n          if (!watchpack._missing.has(file)) watchpack._onRemove(file, file, type);\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n    });\n    watcher.on(\"change\", function (mtime, type) {\n      var _iterator3 = _createForOfIteratorHelper(_this.files),\n        _step3;\n      try {\n        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n          var file = _step3.value;\n          watchpack._onChange(file, mtime, file, type);\n        }\n      } catch (err) {\n        _iterator3.e(err);\n      } finally {\n        _iterator3.f();\n      }\n    });\n    watcher.on(\"remove\", function (type) {\n      var _iterator4 = _createForOfIteratorHelper(_this.files),\n        _step4;\n      try {\n        for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n          var file = _step4.value;\n          watchpack._onRemove(file, file, type);\n        }\n      } catch (err) {\n        _iterator4.e(err);\n      } finally {\n        _iterator4.f();\n      }\n    });\n  }\n  _createClass(WatchpackFileWatcher, [{\n    key: \"update\",\n    value: function update(files) {\n      if (!Array.isArray(files)) {\n        if (this.files.length !== 1) {\n          this.files = [files];\n        } else if (this.files[0] !== files) {\n          this.files[0] = files;\n        }\n      } else {\n        this.files = files;\n      }\n    }\n  }, {\n    key: \"close\",\n    value: function close() {\n      this.watcher.close();\n    }\n  }]);\n  return WatchpackFileWatcher;\n}();\nvar WatchpackDirectoryWatcher = /*#__PURE__*/function () {\n  function WatchpackDirectoryWatcher(watchpack, watcher, directories) {\n    var _this2 = this;\n    _classCallCheck(this, WatchpackDirectoryWatcher);\n    this.directories = Array.isArray(directories) ? directories : [directories];\n    this.watcher = watcher;\n    watcher.on(\"initial-missing\", function (type) {\n      var _iterator5 = _createForOfIteratorHelper(_this2.directories),\n        _step5;\n      try {\n        for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {\n          var item = _step5.value;\n          watchpack._onRemove(item, item, type);\n        }\n      } catch (err) {\n        _iterator5.e(err);\n      } finally {\n        _iterator5.f();\n      }\n    });\n    watcher.on(\"change\", function (file, mtime, type) {\n      var _iterator6 = _createForOfIteratorHelper(_this2.directories),\n        _step6;\n      try {\n        for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {\n          var item = _step6.value;\n          watchpack._onChange(item, mtime, file, type);\n        }\n      } catch (err) {\n        _iterator6.e(err);\n      } finally {\n        _iterator6.f();\n      }\n    });\n    watcher.on(\"remove\", function (type) {\n      var _iterator7 = _createForOfIteratorHelper(_this2.directories),\n        _step7;\n      try {\n        for (_iterator7.s(); !(_step7 = _iterator7.n()).done;) {\n          var item = _step7.value;\n          watchpack._onRemove(item, item, type);\n        }\n      } catch (err) {\n        _iterator7.e(err);\n      } finally {\n        _iterator7.f();\n      }\n    });\n  }\n  _createClass(WatchpackDirectoryWatcher, [{\n    key: \"update\",\n    value: function update(directories) {\n      if (!Array.isArray(directories)) {\n        if (this.directories.length !== 1) {\n          this.directories = [directories];\n        } else if (this.directories[0] !== directories) {\n          this.directories[0] = directories;\n        }\n      } else {\n        this.directories = directories;\n      }\n    }\n  }, {\n    key: \"close\",\n    value: function close() {\n      this.watcher.close();\n    }\n  }]);\n  return WatchpackDirectoryWatcher;\n}();\nvar Watchpack = /*#__PURE__*/function (_EventEmitter) {\n  _inherits(Watchpack, _EventEmitter);\n  var _super = _createSuper(Watchpack);\n  function Watchpack(options) {\n    var _this3;\n    _classCallCheck(this, Watchpack);\n    _this3 = _super.call(this);\n    if (!options) options = EMPTY_OPTIONS;\n    _this3.options = options;\n    _this3.aggregateTimeout = typeof options.aggregateTimeout === \"number\" ? options.aggregateTimeout : 200;\n    _this3.watcherOptions = cachedNormalizeOptions(options);\n    _this3.watcherManager = getWatcherManager(_this3.watcherOptions);\n    _this3.fileWatchers = new Map();\n    _this3.directoryWatchers = new Map();\n    _this3._missing = new Set();\n    _this3.startTime = undefined;\n    _this3.paused = false;\n    _this3.aggregatedChanges = new Set();\n    _this3.aggregatedRemovals = new Set();\n    _this3.aggregateTimer = undefined;\n    _this3._onTimeout = _this3._onTimeout.bind(_assertThisInitialized(_this3));\n    return _this3;\n  }\n  _createClass(Watchpack, [{\n    key: \"watch\",\n    value: function watch(arg1, arg2, arg3) {\n      var _this4 = this;\n      var files, directories, missing, startTime;\n      if (!arg2) {\n        var _arg1$files = arg1.files;\n        files = _arg1$files === void 0 ? EMPTY_ARRAY : _arg1$files;\n        var _arg1$directories = arg1.directories;\n        directories = _arg1$directories === void 0 ? EMPTY_ARRAY : _arg1$directories;\n        var _arg1$missing = arg1.missing;\n        missing = _arg1$missing === void 0 ? EMPTY_ARRAY : _arg1$missing;\n        startTime = arg1.startTime;\n      } else {\n        files = arg1;\n        directories = arg2;\n        missing = EMPTY_ARRAY;\n        startTime = arg3;\n      }\n      this.paused = false;\n      var fileWatchers = this.fileWatchers;\n      var directoryWatchers = this.directoryWatchers;\n      var ignored = this.watcherOptions.ignored;\n      var filter = function filter(path) {\n        return !ignored(path);\n      };\n      var addToMap = function addToMap(map, key, item) {\n        var list = map.get(key);\n        if (list === undefined) {\n          map.set(key, item);\n        } else if (Array.isArray(list)) {\n          list.push(item);\n        } else {\n          map.set(key, [list, item]);\n        }\n      };\n      var fileWatchersNeeded = new Map();\n      var directoryWatchersNeeded = new Map();\n      var missingFiles = new Set();\n      if (this.watcherOptions.followSymlinks) {\n        var resolver = new LinkResolver();\n        var _iterator8 = _createForOfIteratorHelper(files),\n          _step8;\n        try {\n          for (_iterator8.s(); !(_step8 = _iterator8.n()).done;) {\n            var file = _step8.value;\n            if (filter(file)) {\n              var _iterator11 = _createForOfIteratorHelper(resolver.resolve(file)),\n                _step11;\n              try {\n                for (_iterator11.s(); !(_step11 = _iterator11.n()).done;) {\n                  var innerFile = _step11.value;\n                  if (file === innerFile || filter(innerFile)) {\n                    addToMap(fileWatchersNeeded, innerFile, file);\n                  }\n                }\n              } catch (err) {\n                _iterator11.e(err);\n              } finally {\n                _iterator11.f();\n              }\n            }\n          }\n        } catch (err) {\n          _iterator8.e(err);\n        } finally {\n          _iterator8.f();\n        }\n        var _iterator9 = _createForOfIteratorHelper(missing),\n          _step9;\n        try {\n          for (_iterator9.s(); !(_step9 = _iterator9.n()).done;) {\n            var _file = _step9.value;\n            if (filter(_file)) {\n              var _iterator12 = _createForOfIteratorHelper(resolver.resolve(_file)),\n                _step12;\n              try {\n                for (_iterator12.s(); !(_step12 = _iterator12.n()).done;) {\n                  var _innerFile = _step12.value;\n                  if (_file === _innerFile || filter(_innerFile)) {\n                    missingFiles.add(_file);\n                    addToMap(fileWatchersNeeded, _innerFile, _file);\n                  }\n                }\n              } catch (err) {\n                _iterator12.e(err);\n              } finally {\n                _iterator12.f();\n              }\n            }\n          }\n        } catch (err) {\n          _iterator9.e(err);\n        } finally {\n          _iterator9.f();\n        }\n        var _iterator10 = _createForOfIteratorHelper(directories),\n          _step10;\n        try {\n          for (_iterator10.s(); !(_step10 = _iterator10.n()).done;) {\n            var dir = _step10.value;\n            if (filter(dir)) {\n              var first = true;\n              var _iterator13 = _createForOfIteratorHelper(resolver.resolve(dir)),\n                _step13;\n              try {\n                for (_iterator13.s(); !(_step13 = _iterator13.n()).done;) {\n                  var innerItem = _step13.value;\n                  if (filter(innerItem)) {\n                    addToMap(first ? directoryWatchersNeeded : fileWatchersNeeded, innerItem, dir);\n                  }\n                  first = false;\n                }\n              } catch (err) {\n                _iterator13.e(err);\n              } finally {\n                _iterator13.f();\n              }\n            }\n          }\n        } catch (err) {\n          _iterator10.e(err);\n        } finally {\n          _iterator10.f();\n        }\n      } else {\n        var _iterator14 = _createForOfIteratorHelper(files),\n          _step14;\n        try {\n          for (_iterator14.s(); !(_step14 = _iterator14.n()).done;) {\n            var _file2 = _step14.value;\n            if (filter(_file2)) {\n              addToMap(fileWatchersNeeded, _file2, _file2);\n            }\n          }\n        } catch (err) {\n          _iterator14.e(err);\n        } finally {\n          _iterator14.f();\n        }\n        var _iterator15 = _createForOfIteratorHelper(missing),\n          _step15;\n        try {\n          for (_iterator15.s(); !(_step15 = _iterator15.n()).done;) {\n            var _file3 = _step15.value;\n            if (filter(_file3)) {\n              missingFiles.add(_file3);\n              addToMap(fileWatchersNeeded, _file3, _file3);\n            }\n          }\n        } catch (err) {\n          _iterator15.e(err);\n        } finally {\n          _iterator15.f();\n        }\n        var _iterator16 = _createForOfIteratorHelper(directories),\n          _step16;\n        try {\n          for (_iterator16.s(); !(_step16 = _iterator16.n()).done;) {\n            var _dir = _step16.value;\n            if (filter(_dir)) {\n              addToMap(directoryWatchersNeeded, _dir, _dir);\n            }\n          }\n        } catch (err) {\n          _iterator16.e(err);\n        } finally {\n          _iterator16.f();\n        }\n      }\n      // Close unneeded old watchers\n      // and update existing watchers\n      var _iterator17 = _createForOfIteratorHelper(fileWatchers),\n        _step17;\n      try {\n        for (_iterator17.s(); !(_step17 = _iterator17.n()).done;) {\n          var _step17$value = _slicedToArray(_step17.value, 2),\n            key = _step17$value[0],\n            w = _step17$value[1];\n          var needed = fileWatchersNeeded.get(key);\n          if (needed === undefined) {\n            w.close();\n            fileWatchers.delete(key);\n          } else {\n            w.update(needed);\n            fileWatchersNeeded.delete(key);\n          }\n        }\n      } catch (err) {\n        _iterator17.e(err);\n      } finally {\n        _iterator17.f();\n      }\n      var _iterator18 = _createForOfIteratorHelper(directoryWatchers),\n        _step18;\n      try {\n        for (_iterator18.s(); !(_step18 = _iterator18.n()).done;) {\n          var _step18$value = _slicedToArray(_step18.value, 2),\n            _key2 = _step18$value[0],\n            _w = _step18$value[1];\n          var _needed = directoryWatchersNeeded.get(_key2);\n          if (_needed === undefined) {\n            _w.close();\n            directoryWatchers.delete(_key2);\n          } else {\n            _w.update(_needed);\n            directoryWatchersNeeded.delete(_key2);\n          }\n        }\n        // Create new watchers and install handlers on these watchers\n      } catch (err) {\n        _iterator18.e(err);\n      } finally {\n        _iterator18.f();\n      }\n      watchEventSource.batch(function () {\n        var _iterator19 = _createForOfIteratorHelper(fileWatchersNeeded),\n          _step19;\n        try {\n          for (_iterator19.s(); !(_step19 = _iterator19.n()).done;) {\n            var _step19$value = _slicedToArray(_step19.value, 2),\n              key = _step19$value[0],\n              _files = _step19$value[1];\n            var watcher = _this4.watcherManager.watchFile(key, startTime);\n            if (watcher) {\n              fileWatchers.set(key, new WatchpackFileWatcher(_this4, watcher, _files));\n            }\n          }\n        } catch (err) {\n          _iterator19.e(err);\n        } finally {\n          _iterator19.f();\n        }\n        var _iterator20 = _createForOfIteratorHelper(directoryWatchersNeeded),\n          _step20;\n        try {\n          for (_iterator20.s(); !(_step20 = _iterator20.n()).done;) {\n            var _step20$value = _slicedToArray(_step20.value, 2),\n              _key = _step20$value[0],\n              _directories = _step20$value[1];\n            var _watcher = _this4.watcherManager.watchDirectory(_key, startTime);\n            if (_watcher) {\n              directoryWatchers.set(_key, new WatchpackDirectoryWatcher(_this4, _watcher, _directories));\n            }\n          }\n        } catch (err) {\n          _iterator20.e(err);\n        } finally {\n          _iterator20.f();\n        }\n      });\n      this._missing = missingFiles;\n      this.startTime = startTime;\n    }\n  }, {\n    key: \"close\",\n    value: function close() {\n      this.paused = true;\n      if (this.aggregateTimer) clearTimeout(this.aggregateTimer);\n      var _iterator21 = _createForOfIteratorHelper(this.fileWatchers.values()),\n        _step21;\n      try {\n        for (_iterator21.s(); !(_step21 = _iterator21.n()).done;) {\n          var w = _step21.value;\n          w.close();\n        }\n      } catch (err) {\n        _iterator21.e(err);\n      } finally {\n        _iterator21.f();\n      }\n      var _iterator22 = _createForOfIteratorHelper(this.directoryWatchers.values()),\n        _step22;\n      try {\n        for (_iterator22.s(); !(_step22 = _iterator22.n()).done;) {\n          var _w2 = _step22.value;\n          _w2.close();\n        }\n      } catch (err) {\n        _iterator22.e(err);\n      } finally {\n        _iterator22.f();\n      }\n      this.fileWatchers.clear();\n      this.directoryWatchers.clear();\n    }\n  }, {\n    key: \"pause\",\n    value: function pause() {\n      this.paused = true;\n      if (this.aggregateTimer) clearTimeout(this.aggregateTimer);\n    }\n  }, {\n    key: \"getTimes\",\n    value: function getTimes() {\n      var directoryWatchers = new Set();\n      addWatchersToSet(this.fileWatchers.values(), directoryWatchers);\n      addWatchersToSet(this.directoryWatchers.values(), directoryWatchers);\n      var obj = Object.create(null);\n      var _iterator23 = _createForOfIteratorHelper(directoryWatchers),\n        _step23;\n      try {\n        for (_iterator23.s(); !(_step23 = _iterator23.n()).done;) {\n          var w = _step23.value;\n          var times = w.getTimes();\n          for (var _i = 0, _Object$keys = Object.keys(times); _i < _Object$keys.length; _i++) {\n            var file = _Object$keys[_i];\n            obj[file] = times[file];\n          }\n        }\n      } catch (err) {\n        _iterator23.e(err);\n      } finally {\n        _iterator23.f();\n      }\n      return obj;\n    }\n  }, {\n    key: \"getTimeInfoEntries\",\n    value: function getTimeInfoEntries() {\n      var map = new Map();\n      this.collectTimeInfoEntries(map, map);\n      return map;\n    }\n  }, {\n    key: \"collectTimeInfoEntries\",\n    value: function collectTimeInfoEntries(fileTimestamps, directoryTimestamps) {\n      var allWatchers = new Set();\n      addWatchersToSet(this.fileWatchers.values(), allWatchers);\n      addWatchersToSet(this.directoryWatchers.values(), allWatchers);\n      var safeTime = {\n        value: 0\n      };\n      var _iterator24 = _createForOfIteratorHelper(allWatchers),\n        _step24;\n      try {\n        for (_iterator24.s(); !(_step24 = _iterator24.n()).done;) {\n          var w = _step24.value;\n          w.collectTimeInfoEntries(fileTimestamps, directoryTimestamps, safeTime);\n        }\n      } catch (err) {\n        _iterator24.e(err);\n      } finally {\n        _iterator24.f();\n      }\n    }\n  }, {\n    key: \"getAggregated\",\n    value: function getAggregated() {\n      if (this.aggregateTimer) {\n        clearTimeout(this.aggregateTimer);\n        this.aggregateTimer = undefined;\n      }\n      var changes = this.aggregatedChanges;\n      var removals = this.aggregatedRemovals;\n      this.aggregatedChanges = new Set();\n      this.aggregatedRemovals = new Set();\n      return {\n        changes: changes,\n        removals: removals\n      };\n    }\n  }, {\n    key: \"_onChange\",\n    value: function _onChange(item, mtime, file, type) {\n      file = file || item;\n      if (!this.paused) {\n        this.emit(\"change\", file, mtime, type);\n        if (this.aggregateTimer) clearTimeout(this.aggregateTimer);\n        this.aggregateTimer = setTimeout(this._onTimeout, this.aggregateTimeout);\n      }\n      this.aggregatedRemovals.delete(item);\n      this.aggregatedChanges.add(item);\n    }\n  }, {\n    key: \"_onRemove\",\n    value: function _onRemove(item, file, type) {\n      file = file || item;\n      if (!this.paused) {\n        this.emit(\"remove\", file, type);\n        if (this.aggregateTimer) clearTimeout(this.aggregateTimer);\n        this.aggregateTimer = setTimeout(this._onTimeout, this.aggregateTimeout);\n      }\n      this.aggregatedChanges.delete(item);\n      this.aggregatedRemovals.add(item);\n    }\n  }, {\n    key: \"_onTimeout\",\n    value: function _onTimeout() {\n      this.aggregateTimer = undefined;\n      var changes = this.aggregatedChanges;\n      var removals = this.aggregatedRemovals;\n      this.aggregatedChanges = new Set();\n      this.aggregatedRemovals = new Set();\n      this.emit(\"aggregated\", changes, removals);\n    }\n  }]);\n  return Watchpack;\n}(EventEmitter);\nmodule.exports = Watchpack;","map":{"version":3,"names":["getWatcherManager","require","LinkResolver","EventEmitter","globToRegExp","watchEventSource","EMPTY_ARRAY","EMPTY_OPTIONS","addWatchersToSet","watchers","set","ww","w","watcher","has","directoryWatcher","add","stringToRegexp","ignored","source","globstar","extended","matchingStart","slice","length","ignoredToFunction","Array","isArray","regexp","RegExp","map","i","join","x","test","replace","Function","Error","normalizeOptions","options","followSymlinks","poll","normalizeCache","WeakMap","cachedNormalizeOptions","cacheEntry","get","undefined","normalized","WatchpackFileWatcher","watchpack","files","on","type","file","_missing","_onRemove","mtime","_onChange","close","WatchpackDirectoryWatcher","directories","item","Watchpack","aggregateTimeout","watcherOptions","watcherManager","fileWatchers","Map","directoryWatchers","Set","startTime","paused","aggregatedChanges","aggregatedRemovals","aggregateTimer","_onTimeout","bind","arg1","arg2","arg3","missing","filter","path","addToMap","key","list","push","fileWatchersNeeded","directoryWatchersNeeded","missingFiles","resolver","resolve","innerFile","dir","first","innerItem","needed","delete","update","batch","watchFile","watchDirectory","clearTimeout","values","clear","obj","Object","create","times","getTimes","keys","collectTimeInfoEntries","fileTimestamps","directoryTimestamps","allWatchers","safeTime","value","changes","removals","emit","setTimeout","module","exports"],"sources":["/Users/brunocamparadiniz/Desktop/coding/BC-AY/react/todolist/node_modules/watchpack/lib/watchpack.js"],"sourcesContent":["/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst getWatcherManager = require(\"./getWatcherManager\");\nconst LinkResolver = require(\"./LinkResolver\");\nconst EventEmitter = require(\"events\").EventEmitter;\nconst globToRegExp = require(\"glob-to-regexp\");\nconst watchEventSource = require(\"./watchEventSource\");\n\nconst EMPTY_ARRAY = [];\nconst EMPTY_OPTIONS = {};\n\nfunction addWatchersToSet(watchers, set) {\n\tfor (const ww of watchers) {\n\t\tconst w = ww.watcher;\n\t\tif (!set.has(w.directoryWatcher)) {\n\t\t\tset.add(w.directoryWatcher);\n\t\t}\n\t}\n}\n\nconst stringToRegexp = ignored => {\n\tconst source = globToRegExp(ignored, { globstar: true, extended: true })\n\t\t.source;\n\tconst matchingStart = source.slice(0, source.length - 1) + \"(?:$|\\\\/)\";\n\treturn matchingStart;\n};\n\nconst ignoredToFunction = ignored => {\n\tif (Array.isArray(ignored)) {\n\t\tconst regexp = new RegExp(ignored.map(i => stringToRegexp(i)).join(\"|\"));\n\t\treturn x => regexp.test(x.replace(/\\\\/g, \"/\"));\n\t} else if (typeof ignored === \"string\") {\n\t\tconst regexp = new RegExp(stringToRegexp(ignored));\n\t\treturn x => regexp.test(x.replace(/\\\\/g, \"/\"));\n\t} else if (ignored instanceof RegExp) {\n\t\treturn x => ignored.test(x.replace(/\\\\/g, \"/\"));\n\t} else if (ignored instanceof Function) {\n\t\treturn ignored;\n\t} else if (ignored) {\n\t\tthrow new Error(`Invalid option for 'ignored': ${ignored}`);\n\t} else {\n\t\treturn () => false;\n\t}\n};\n\nconst normalizeOptions = options => {\n\treturn {\n\t\tfollowSymlinks: !!options.followSymlinks,\n\t\tignored: ignoredToFunction(options.ignored),\n\t\tpoll: options.poll\n\t};\n};\n\nconst normalizeCache = new WeakMap();\nconst cachedNormalizeOptions = options => {\n\tconst cacheEntry = normalizeCache.get(options);\n\tif (cacheEntry !== undefined) return cacheEntry;\n\tconst normalized = normalizeOptions(options);\n\tnormalizeCache.set(options, normalized);\n\treturn normalized;\n};\n\nclass WatchpackFileWatcher {\n\tconstructor(watchpack, watcher, files) {\n\t\tthis.files = Array.isArray(files) ? files : [files];\n\t\tthis.watcher = watcher;\n\t\twatcher.on(\"initial-missing\", type => {\n\t\t\tfor (const file of this.files) {\n\t\t\t\tif (!watchpack._missing.has(file))\n\t\t\t\t\twatchpack._onRemove(file, file, type);\n\t\t\t}\n\t\t});\n\t\twatcher.on(\"change\", (mtime, type) => {\n\t\t\tfor (const file of this.files) {\n\t\t\t\twatchpack._onChange(file, mtime, file, type);\n\t\t\t}\n\t\t});\n\t\twatcher.on(\"remove\", type => {\n\t\t\tfor (const file of this.files) {\n\t\t\t\twatchpack._onRemove(file, file, type);\n\t\t\t}\n\t\t});\n\t}\n\n\tupdate(files) {\n\t\tif (!Array.isArray(files)) {\n\t\t\tif (this.files.length !== 1) {\n\t\t\t\tthis.files = [files];\n\t\t\t} else if (this.files[0] !== files) {\n\t\t\t\tthis.files[0] = files;\n\t\t\t}\n\t\t} else {\n\t\t\tthis.files = files;\n\t\t}\n\t}\n\n\tclose() {\n\t\tthis.watcher.close();\n\t}\n}\n\nclass WatchpackDirectoryWatcher {\n\tconstructor(watchpack, watcher, directories) {\n\t\tthis.directories = Array.isArray(directories) ? directories : [directories];\n\t\tthis.watcher = watcher;\n\t\twatcher.on(\"initial-missing\", type => {\n\t\t\tfor (const item of this.directories) {\n\t\t\t\twatchpack._onRemove(item, item, type);\n\t\t\t}\n\t\t});\n\t\twatcher.on(\"change\", (file, mtime, type) => {\n\t\t\tfor (const item of this.directories) {\n\t\t\t\twatchpack._onChange(item, mtime, file, type);\n\t\t\t}\n\t\t});\n\t\twatcher.on(\"remove\", type => {\n\t\t\tfor (const item of this.directories) {\n\t\t\t\twatchpack._onRemove(item, item, type);\n\t\t\t}\n\t\t});\n\t}\n\n\tupdate(directories) {\n\t\tif (!Array.isArray(directories)) {\n\t\t\tif (this.directories.length !== 1) {\n\t\t\t\tthis.directories = [directories];\n\t\t\t} else if (this.directories[0] !== directories) {\n\t\t\t\tthis.directories[0] = directories;\n\t\t\t}\n\t\t} else {\n\t\t\tthis.directories = directories;\n\t\t}\n\t}\n\n\tclose() {\n\t\tthis.watcher.close();\n\t}\n}\n\nclass Watchpack extends EventEmitter {\n\tconstructor(options) {\n\t\tsuper();\n\t\tif (!options) options = EMPTY_OPTIONS;\n\t\tthis.options = options;\n\t\tthis.aggregateTimeout =\n\t\t\ttypeof options.aggregateTimeout === \"number\"\n\t\t\t\t? options.aggregateTimeout\n\t\t\t\t: 200;\n\t\tthis.watcherOptions = cachedNormalizeOptions(options);\n\t\tthis.watcherManager = getWatcherManager(this.watcherOptions);\n\t\tthis.fileWatchers = new Map();\n\t\tthis.directoryWatchers = new Map();\n\t\tthis._missing = new Set();\n\t\tthis.startTime = undefined;\n\t\tthis.paused = false;\n\t\tthis.aggregatedChanges = new Set();\n\t\tthis.aggregatedRemovals = new Set();\n\t\tthis.aggregateTimer = undefined;\n\t\tthis._onTimeout = this._onTimeout.bind(this);\n\t}\n\n\twatch(arg1, arg2, arg3) {\n\t\tlet files, directories, missing, startTime;\n\t\tif (!arg2) {\n\t\t\t({\n\t\t\t\tfiles = EMPTY_ARRAY,\n\t\t\t\tdirectories = EMPTY_ARRAY,\n\t\t\t\tmissing = EMPTY_ARRAY,\n\t\t\t\tstartTime\n\t\t\t} = arg1);\n\t\t} else {\n\t\t\tfiles = arg1;\n\t\t\tdirectories = arg2;\n\t\t\tmissing = EMPTY_ARRAY;\n\t\t\tstartTime = arg3;\n\t\t}\n\t\tthis.paused = false;\n\t\tconst fileWatchers = this.fileWatchers;\n\t\tconst directoryWatchers = this.directoryWatchers;\n\t\tconst ignored = this.watcherOptions.ignored;\n\t\tconst filter = path => !ignored(path);\n\t\tconst addToMap = (map, key, item) => {\n\t\t\tconst list = map.get(key);\n\t\t\tif (list === undefined) {\n\t\t\t\tmap.set(key, item);\n\t\t\t} else if (Array.isArray(list)) {\n\t\t\t\tlist.push(item);\n\t\t\t} else {\n\t\t\t\tmap.set(key, [list, item]);\n\t\t\t}\n\t\t};\n\t\tconst fileWatchersNeeded = new Map();\n\t\tconst directoryWatchersNeeded = new Map();\n\t\tconst missingFiles = new Set();\n\t\tif (this.watcherOptions.followSymlinks) {\n\t\t\tconst resolver = new LinkResolver();\n\t\t\tfor (const file of files) {\n\t\t\t\tif (filter(file)) {\n\t\t\t\t\tfor (const innerFile of resolver.resolve(file)) {\n\t\t\t\t\t\tif (file === innerFile || filter(innerFile)) {\n\t\t\t\t\t\t\taddToMap(fileWatchersNeeded, innerFile, file);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor (const file of missing) {\n\t\t\t\tif (filter(file)) {\n\t\t\t\t\tfor (const innerFile of resolver.resolve(file)) {\n\t\t\t\t\t\tif (file === innerFile || filter(innerFile)) {\n\t\t\t\t\t\t\tmissingFiles.add(file);\n\t\t\t\t\t\t\taddToMap(fileWatchersNeeded, innerFile, file);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor (const dir of directories) {\n\t\t\t\tif (filter(dir)) {\n\t\t\t\t\tlet first = true;\n\t\t\t\t\tfor (const innerItem of resolver.resolve(dir)) {\n\t\t\t\t\t\tif (filter(innerItem)) {\n\t\t\t\t\t\t\taddToMap(\n\t\t\t\t\t\t\t\tfirst ? directoryWatchersNeeded : fileWatchersNeeded,\n\t\t\t\t\t\t\t\tinnerItem,\n\t\t\t\t\t\t\t\tdir\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfirst = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tfor (const file of files) {\n\t\t\t\tif (filter(file)) {\n\t\t\t\t\taddToMap(fileWatchersNeeded, file, file);\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor (const file of missing) {\n\t\t\t\tif (filter(file)) {\n\t\t\t\t\tmissingFiles.add(file);\n\t\t\t\t\taddToMap(fileWatchersNeeded, file, file);\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor (const dir of directories) {\n\t\t\t\tif (filter(dir)) {\n\t\t\t\t\taddToMap(directoryWatchersNeeded, dir, dir);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t// Close unneeded old watchers\n\t\t// and update existing watchers\n\t\tfor (const [key, w] of fileWatchers) {\n\t\t\tconst needed = fileWatchersNeeded.get(key);\n\t\t\tif (needed === undefined) {\n\t\t\t\tw.close();\n\t\t\t\tfileWatchers.delete(key);\n\t\t\t} else {\n\t\t\t\tw.update(needed);\n\t\t\t\tfileWatchersNeeded.delete(key);\n\t\t\t}\n\t\t}\n\t\tfor (const [key, w] of directoryWatchers) {\n\t\t\tconst needed = directoryWatchersNeeded.get(key);\n\t\t\tif (needed === undefined) {\n\t\t\t\tw.close();\n\t\t\t\tdirectoryWatchers.delete(key);\n\t\t\t} else {\n\t\t\t\tw.update(needed);\n\t\t\t\tdirectoryWatchersNeeded.delete(key);\n\t\t\t}\n\t\t}\n\t\t// Create new watchers and install handlers on these watchers\n\t\twatchEventSource.batch(() => {\n\t\t\tfor (const [key, files] of fileWatchersNeeded) {\n\t\t\t\tconst watcher = this.watcherManager.watchFile(key, startTime);\n\t\t\t\tif (watcher) {\n\t\t\t\t\tfileWatchers.set(key, new WatchpackFileWatcher(this, watcher, files));\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor (const [key, directories] of directoryWatchersNeeded) {\n\t\t\t\tconst watcher = this.watcherManager.watchDirectory(key, startTime);\n\t\t\t\tif (watcher) {\n\t\t\t\t\tdirectoryWatchers.set(\n\t\t\t\t\t\tkey,\n\t\t\t\t\t\tnew WatchpackDirectoryWatcher(this, watcher, directories)\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tthis._missing = missingFiles;\n\t\tthis.startTime = startTime;\n\t}\n\n\tclose() {\n\t\tthis.paused = true;\n\t\tif (this.aggregateTimer) clearTimeout(this.aggregateTimer);\n\t\tfor (const w of this.fileWatchers.values()) w.close();\n\t\tfor (const w of this.directoryWatchers.values()) w.close();\n\t\tthis.fileWatchers.clear();\n\t\tthis.directoryWatchers.clear();\n\t}\n\n\tpause() {\n\t\tthis.paused = true;\n\t\tif (this.aggregateTimer) clearTimeout(this.aggregateTimer);\n\t}\n\n\tgetTimes() {\n\t\tconst directoryWatchers = new Set();\n\t\taddWatchersToSet(this.fileWatchers.values(), directoryWatchers);\n\t\taddWatchersToSet(this.directoryWatchers.values(), directoryWatchers);\n\t\tconst obj = Object.create(null);\n\t\tfor (const w of directoryWatchers) {\n\t\t\tconst times = w.getTimes();\n\t\t\tfor (const file of Object.keys(times)) obj[file] = times[file];\n\t\t}\n\t\treturn obj;\n\t}\n\n\tgetTimeInfoEntries() {\n\t\tconst map = new Map();\n\t\tthis.collectTimeInfoEntries(map, map);\n\t\treturn map;\n\t}\n\n\tcollectTimeInfoEntries(fileTimestamps, directoryTimestamps) {\n\t\tconst allWatchers = new Set();\n\t\taddWatchersToSet(this.fileWatchers.values(), allWatchers);\n\t\taddWatchersToSet(this.directoryWatchers.values(), allWatchers);\n\t\tconst safeTime = { value: 0 };\n\t\tfor (const w of allWatchers) {\n\t\t\tw.collectTimeInfoEntries(fileTimestamps, directoryTimestamps, safeTime);\n\t\t}\n\t}\n\n\tgetAggregated() {\n\t\tif (this.aggregateTimer) {\n\t\t\tclearTimeout(this.aggregateTimer);\n\t\t\tthis.aggregateTimer = undefined;\n\t\t}\n\t\tconst changes = this.aggregatedChanges;\n\t\tconst removals = this.aggregatedRemovals;\n\t\tthis.aggregatedChanges = new Set();\n\t\tthis.aggregatedRemovals = new Set();\n\t\treturn { changes, removals };\n\t}\n\n\t_onChange(item, mtime, file, type) {\n\t\tfile = file || item;\n\t\tif (!this.paused) {\n\t\t\tthis.emit(\"change\", file, mtime, type);\n\t\t\tif (this.aggregateTimer) clearTimeout(this.aggregateTimer);\n\t\t\tthis.aggregateTimer = setTimeout(this._onTimeout, this.aggregateTimeout);\n\t\t}\n\t\tthis.aggregatedRemovals.delete(item);\n\t\tthis.aggregatedChanges.add(item);\n\t}\n\n\t_onRemove(item, file, type) {\n\t\tfile = file || item;\n\t\tif (!this.paused) {\n\t\t\tthis.emit(\"remove\", file, type);\n\t\t\tif (this.aggregateTimer) clearTimeout(this.aggregateTimer);\n\t\t\tthis.aggregateTimer = setTimeout(this._onTimeout, this.aggregateTimeout);\n\t\t}\n\t\tthis.aggregatedChanges.delete(item);\n\t\tthis.aggregatedRemovals.add(item);\n\t}\n\n\t_onTimeout() {\n\t\tthis.aggregateTimer = undefined;\n\t\tconst changes = this.aggregatedChanges;\n\t\tconst removals = this.aggregatedRemovals;\n\t\tthis.aggregatedChanges = new Set();\n\t\tthis.aggregatedRemovals = new Set();\n\t\tthis.emit(\"aggregated\", changes, removals);\n\t}\n}\n\nmodule.exports = Watchpack;\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}